(function(a){tinymce.PluginManager.add("custom_mce_button1",function(c,b){c.addButton("custom_mce_button1",{icon:false,text:"THE_TEXT_OF_THE_BUTTON",onclick:function(d){c.windowManager.open({title:"THE_TITLE_OF_THE_POPUP_WINDOW",id:"plugin-slug-insert-dialog",body:[{type:"textbox",name:"title",placeholder:"PLACE_HOLDER_TEXT",multiline:true,minWidth:700,minHeight:50,},{type:"button",name:"link",text:"Insert/Edit link",onclick:function(f){var g=a("#plugin-slug-insert-dialog .mce-textbox").attr("id");console.log(g+" hola");wpActiveEditor=true;wpLink.open(g);return false},},{type:"button",name:"image",classes:"sidetag-media-button",text:"Insert Media",onclick:function(f){a(function(g){var h;var e=g("#plugin-slug-insert-dialog .mce-textbox");f.preventDefault();if(h){h.open();return}h=wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:false});h.on("select",function(){var i=h.state().get("selection").first().toJSON();var j='<img class="side-tag-image" src="'+i.url+'" alt="'+i.alt+'" style="max-width:100%;"/>'+i.caption;e.val(j+e.val())});h.open()});return false}}],onsubmit:function(f){c.insertContent('<div class="CLASS_NAME">'+f.data.title+"</div>")}})}})})})(jQuery);